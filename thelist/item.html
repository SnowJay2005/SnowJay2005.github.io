<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Item Page</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="thelist/favicon.ico">
</head>
<body>
  <header>
    <h1>Item Page</h1>
  </header>

  <section id="item-details">
    <!-- Item details will be dynamically generated here -->
  </section>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-database.js"></script>

  <!-- Your script -->
  <script>
    // Check if Firebase app is already initialized
    if (!firebase.apps.length) {
      var firebaseConfig = {
      apiKey: "AIzaSyDPKjpimOZLKwNwfm_IQFm8X4Pv2ZgucIA",
      authDomain: "the-list-175d3.firebaseapp.com",
      databaseURL: "https://the-list-175d3-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "the-list-175d3",
      storageBucket: "the-list-175d3.appspot.com",
      messagingSenderId: "133562798111",
      appId: "1:133562798111:web:34a18cd64c6202314cc52a"
    };
      firebase.initializeApp(firebaseConfig);
    }

    // Retrieve the item name from the URL hash
    var itemHash = window.location.hash.substr(1);
    var itemName = decodeURIComponent(itemHash);

    firebase.database()
      .ref('items')
      .orderByChild('name')
      .equalTo(itemName)
      .limitToFirst(1)
      .once('value')
      .then(function(snapshot) {
        if (!snapshot.exists()) {
          console.log('Item not found: ' + itemName);
        } else {
          var item = Object.values(snapshot.val())[0];
          updateItemPage(item);
        }
      })
      .catch(function(error) {
        console.log('Error getting item:', error);
      });

    function updateItemPage(item) {
      var itemDetailsElement = document.getElementById('item-details');
      itemDetailsElement.innerHTML = '';

      var itemCard = document.createElement('div');
      itemCard.classList.add('item-card');

      var itemName = document.createElement('h2');
      itemName.textContent = item.name;

      var itemCount = document.createElement('p');
      itemCount.textContent = 'Count: ' + item.count;

      var itemImage = document.createElement('img');
      itemImage.src = item.image;
      itemImage.alt = item.name;

      var itemDescription = document.createElement('p');
      itemDescription.textContent = item.description;

      itemCard.appendChild(itemName);
      itemCard.appendChild(itemCount);
      itemCard.appendChild(itemImage);
      itemCard.appendChild(itemDescription);

      itemDetailsElement.appendChild(itemCard);
    }
  </script>
</body>
</html>
